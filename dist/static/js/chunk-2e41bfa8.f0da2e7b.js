(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e41bfa8"],{"316f":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}));var r=n("a3a3"),o=n("4328"),l=n.n(o);function a(e,t){return Object(r["a"])({url:e+"?"+l.a.stringify(t,{indices:!1}),method:"get"})}function i(e,t){return Object(r["a"])({url:e+"?"+l.a.stringify(t,{indices:!1}),method:"get",responseType:"blob"})}},"457d":function(e,t,n){},4718:function(e,t,n){"use strict";n.r(t);var r,o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"head-container"},[e.crud.props.searchToggle?n("div",[n("span",[e._v("菜单名：")]),e._v(" "),n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"输入菜单名称搜索"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.crud.toQuery(t)}},model:{value:e.query.blurry,callback:function(t){e.$set(e.query,"blurry",t)},expression:"query.blurry"}}),e._v(" "),n("rrOperation")],1):e._e(),e._v(" "),n("crudOperation")],1),e._v(" "),n("div",[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.crud.loading,expression:"crud.loading"}],ref:"table",attrs:{lazy:"",load:e.getMenus,data:e.crud.data,"tree-props":{children:"children",hasChildren:"hasChildren"},"row-key":"id"},on:{select:e.crud.selectChange,"select-all":e.crud.selectAllChange,"selection-change":e.crud.selectionChangeHandler}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),n("el-table-column",{attrs:{prop:"title",label:"菜单标题",width:"155"}}),e._v(" "),n("el-table-column",{attrs:{prop:"icon",label:"图标",width:"60",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("svg-icon",{attrs:{"icon-class":e.row.icon?e.row.icon:""}})]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"menuSort",label:"排序",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"path",label:"路由地址",align:"center",width:"150"}}),e._v(" "),n("el-table-column",{attrs:{prop:"component",label:"组件路径",align:"center",width:"150"}}),e._v(" "),n("el-table-column",{attrs:{prop:"hidden",label:"可见",width:"75",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.hidden?n("span",[e._v("否")]):n("span",[e._v("是")])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.parseTime(t.row.createTime)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"150px",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("udOperation",{attrs:{data:e.row,"disabled-dle":1===e.row.id,msg:"确定删除吗,如果存在下级节点则一并删除，此操作不能撤销！"}})]}}])})],1),e._v(" "),n("el-dialog",{attrs:{"append-to-body":"","close-on-click-modal":!1,"before-close":e.crud.cancelCU,visible:e.crud.status.cu>0,title:e.crud.status.title,width:"580px"},on:{"update:visible":function(t){return e.$set(e.crud.status,"cu > 0",t)}}},[n("el-col",{attrs:{span:22}},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-position":"right",size:"small","label-width":"80px"}},["2"!==e.form.type.toString()?n("el-form-item",{attrs:{label:"菜单标题",prop:"title"}},[n("el-input",{attrs:{placeholder:"菜单标题"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1):e._e(),e._v(" "),"2"===e.form.type.toString()?n("el-form-item",{attrs:{label:"按钮名称",prop:"title"}},[n("el-input",{staticStyle:{width:"178px"},attrs:{placeholder:"按钮名称"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1):e._e(),e._v(" "),n("el-form-item",{attrs:{label:"菜单类型"}},[n("el-radio-group",{attrs:{size:"mini"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[n("el-radio-button",{attrs:{label:0}},[e._v("目录")]),e._v(" "),n("el-radio-button",{attrs:{label:1}},[e._v("菜单")]),e._v(" "),n("el-radio-button",{attrs:{label:2}},[e._v("按钮")])],1)],1),e._v(" "),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.form.iframe&&"1"===e.form.type.toString(),expression:"!form.iframe && form.type.toString() === '1'"}],attrs:{label:"组件名称",prop:"componentName"}},[n("el-input",{attrs:{placeholder:"匹配组件内Name字段"},model:{value:e.form.componentName,callback:function(t){e.$set(e.form,"componentName",t)},expression:"form.componentName"}})],1),e._v(" "),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"2"!==e.form.type.toString(),expression:"form.type.toString() !== '2'"}],attrs:{label:"菜单图标",prop:"icon"}},[n("el-input",{attrs:{placeholder:"选择图标"},model:{value:e.form.icon,callback:function(t){e.$set(e.form,"icon",t)},expression:"form.icon"}},[n("template",{slot:"prepend"},[n("svg-icon",{attrs:{"icon-class":e.form.icon?e.form.icon:""}})],1),e._v(" "),n("el-button",{attrs:{slot:"append"},on:{click:function(t){e.iconVisible=!0}},slot:"append"},[e._v("选择")])],2)],1),e._v(" "),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===e.form.type.toString(),expression:"form.type.toString() === '1'"}],attrs:{label:"菜单缓存",prop:"cache"}},[n("el-radio-group",{attrs:{size:"mini"},model:{value:e.form.cache,callback:function(t){e.$set(e.form,"cache",t)},expression:"form.cache"}},[n("el-radio-button",{attrs:{label:"true"}},[e._v("是")]),e._v(" "),n("el-radio-button",{attrs:{label:"false"}},[e._v("否")])],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"菜单可见"}},[n("el-radio-group",{model:{value:e.form.hidden,callback:function(t){e.$set(e.form,"hidden",t)},expression:"form.hidden"}},[n("el-radio-button",{attrs:{label:!1}},[e._v("是")]),e._v(" "),n("el-radio-button",{attrs:{label:!0}},[e._v("否")])],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"排序",prop:"menuSort"}},[n("el-input-number",{attrs:{min:1,max:999,clearable:""},model:{value:e.form.menuSort,callback:function(t){e.$set(e.form,"menuSort",t)},expression:"form.menuSort"}})],1),e._v(" "),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"2"!==e.form.type.toString(),expression:"form.type.toString() !== '2'"}],attrs:{label:"路由地址"}},[n("el-input",{attrs:{placeholder:"请输入路由地址"},model:{value:e.form.path,callback:function(t){e.$set(e.form,"path",t)},expression:"form.path"}})],1),e._v(" "),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===e.form.type.toString(),expression:"form.type.toString() === '1'"}],attrs:{label:"组件路径"}},[n("el-input",{attrs:{placeholder:"请输入组件路径"},model:{value:e.form.component,callback:function(t){e.$set(e.form,"component",t)},expression:"form.component"}})],1),e._v(" "),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"0"!==e.form.type.toString(),expression:"form.type.toString() !== '0'"}],attrs:{label:"权限"}},[n("el-input",{attrs:{placeholder:"请输入权限"},model:{value:e.form.permission,callback:function(t){e.$set(e.form,"permission",t)},expression:"form.permission"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"上级菜单",prop:"pid"}},[n("treeselect",{attrs:{options:e.menus,"load-options":e.loadMenus,placeholder:"选择上级菜单"},model:{value:e.form.pid,callback:function(t){e.$set(e.form,"pid",t)},expression:"form.pid"}})],1)],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{loading:2===e.crud.status.cu,type:"primary"},on:{click:e.crud.submitCU}},[e._v("确认")]),e._v(" "),n("el-button",{on:{click:e.crud.cancelCU}},[e._v("取消")])],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"选择图标",visible:e.iconVisible,width:"600px","show-close":!1,"destroy-on-close":!0},on:{"update:visible":function(t){e.iconVisible=t}}},[n("el-row",e._l(e.icons,(function(t,r){return n("el-col",{key:r,attrs:{span:3}},[n("el-button",{on:{click:function(n){return e.selectIcon(t)}}},[n("svg-icon",{attrs:{"icon-class":t||""}})],1)],1)})),1),e._v(" "),n("el-button",{attrs:{slot:"reference"},slot:"reference"},[e._v("选择")])],1)],1)])},l=[],a=n("ade3"),i=(n("4917"),n("ac6a"),n("5530")),s=n("69aa"),c=n("ca17"),u=n.n(c),d=(n("542c"),n("c6db")),m=n("4f59"),p=n("ab00"),f=n("8414"),b={id:null,title:null,menuSort:999,path:null,component:null,componentName:null,iframe:!1,roles:[],pid:0,icon:null,cache:!1,hidden:!1,type:0,permission:null},v={name:"Menu",components:{Treeselect:u.a,crudOperation:p["a"],rrOperation:m["a"],udOperation:f["a"]},cruds:function(){return Object(d["b"])({title:"菜单",url:"api/menus",crudMethod:Object(i["a"])({},s["b"])})},mixins:[Object(d["f"])(),Object(d["d"])(),Object(d["c"])(b),Object(d["a"])()],data:function(){return{iconVisible:!1,icons:[],menus:[],permission:{add:["admin","menu:add"],edit:["admin","menu:edit"],del:["admin","menu:del"]},rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],path:[{required:!0,message:"请输入地址",trigger:"blur"}]}}},created:function(){this.readFile()},methods:(r={},Object(a["a"])(r,d["b"].HOOK.afterToCU,(function(e,t){this.menus=[],null!=t.id?(null===t.pid&&(t.pid=0),this.getSupDepts(t.id)):this.menus.push({id:0,label:"顶级菜单",children:null})})),Object(a["a"])(r,"getMenus",(function(e,t,n){var r={pid:e.id};setTimeout((function(){s["b"].getMenus(r).then((function(e){n(e.content)}))}),100)})),Object(a["a"])(r,"getSupDepts",(function(e){var t=this;s["b"].getMenuSuperior(e).then((function(e){var n=e.map((function(e){return e.leaf||e.children||(e.children=null),e}));t.menus=[{id:0,label:"顶级菜单",children:n}]}))})),Object(a["a"])(r,"loadMenus",(function(e){var t=e.action,n=e.parentNode,r=e.callback;t===c["LOAD_CHILDREN_OPTIONS"]&&s["b"].getMenusTree(n.id).then((function(e){n.children=e.map((function(e){return e.leaf||(e.children=null),e})),setTimeout((function(){r()}),100)}))})),Object(a["a"])(r,"selected",(function(e){this.form.icon=e})),Object(a["a"])(r,"readFile",(function(){var e=n("51ff"),t=function(e){return e.keys()},r=/\.\/(.*)\.svg/;this.icons=t(e).map((function(e){return e.match(r)[1]}))})),Object(a["a"])(r,"selectIcon",(function(e){this.form.icon=e,this.iconVisible=!1})),r)},h=v,g=(n("c983"),n("f502"),n("2877")),_=Object(g["a"])(h,o,l,!1,null,"06c8da39",null);t["default"]=_.exports},4917:function(e,t,n){"use strict";var r=n("cb7c"),o=n("9def"),l=n("0390"),a=n("5f1b");n("214f")("match",1,(function(e,t,n,i){return[function(n){var r=e(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=i(n,e,this);if(t.done)return t.value;var s=r(e),c=String(this);if(!s.global)return a(s,c);var u=s.unicode;s.lastIndex=0;var d,m=[],p=0;while(null!==(d=a(s,c))){var f=String(d[0]);m[p]=f,""===f&&(s.lastIndex=l(c,o(s.lastIndex),u)),p++}return 0===p?null:m}]}))},af91:function(e,t,n){},c983:function(e,t,n){"use strict";n("457d")},f502:function(e,t,n){"use strict";n("af91")}}]);